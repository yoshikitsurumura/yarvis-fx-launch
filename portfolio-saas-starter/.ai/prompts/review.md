Act as a strict code reviewer for this repo.
Checklist:
- Correctness and safety first; surface risks and edge cases
- Fit with AGENTS.md: naming, structure, typing
- Tests: coverage for core logic and error paths
- Diff-friendly suggestions: file + line + change

Review this change:
<PASTE DIFF OR SUMMARY HERE>

